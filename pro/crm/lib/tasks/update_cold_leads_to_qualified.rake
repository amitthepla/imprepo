namespace :crm do
	desc "update cold leads to qualified for december"
	task :update_cold_leads_to_qualified => :environment do
	  
	  leads = Business::Lead.where(:stage=>'cold',:updated_at.gte=>Date.new(2015,12,1)).all
	  puts "list of lead ids which are moved from cold to qualified december 2015"
	  leads.map{|ld| p ld.id}
	  #leads.map{|ld| p ld.id; p "list of existing tasks of this lead"; p ld.tasks.map{|task| p task.id;p task.stage;}}
	  leads.map{|ld|  ld.update_attributes(:stage=>'inquiry');Business::Lead.task_create_new(ld,ld.contact);}

	end
  desc "Updte stage to cold for New and Qualified leads whose tasks are in overdue "
  task update_overdue_leads_stage: :environment do
  	overdue_tasks = Business::Task.where({due_date: {'$lt' => Time.zone.now - 1.day},:stage=>'inquiry'})
  	overdue_leads = Business::Lead.where({:_id => {"$in" => overdue_tasks.map{|task| task.lead_id}}, :stage => {"$in" => ['inquiry','inquiry']}})
  	puts "list of leads which has any overdue task"
  	overdue_leads.map{|lead| puts lead.id}
  	puts " ********************************** "
  	#overdue_leads.map{|lead| puts lead.id;p lead.tasks.where(:stage=>'inquiry').all.map{|task| p [task.id,task.due_date]}}
  	overdue_leads.map{|ld|  ld.update_attributes(:stage=>'cold');Business::Lead.task_create(ld,ld.contact);}

  	
  end
  desc "undo update_cold leads to qualified after running update_overdue_leads_stage"
  task :undo_cold_leads_to_qualified => :environment do
    lead_ids = ['556e72366431320003130300', '56392a3e6533320003e30000', '54fdb1906461350003510000', '5509ee7c3662360003770000', '552e92ad3933360003050000', '5537cce13830330003040000', '55413c543431340003710100', '554847643531340003060000', '554bebc93162660003240000', '554dd42563313100030d0000', '555256a13631610003380000', '555217946561630003e90000', '5554c72564643000036b0000', '5554e9d16464300003ce0000', '5554ed776464300003db0000', '55565d5d3264650003010000', '5557f6033231630003080000', '55583a233231630003170000', '555b0d793738620003140000', '553816693637300003040000', '55550ab93131350003030000', '555de35f3461330003940000', '555a30383437330003a80100', '555e06ab3534310003600000', '5561d6d96565390003160000', '5562041a6565390003230000', '556228c76438380003270000', '55627ce93065660003050000', '5562f2563065660003170000', '5563485e3133320003250000', '55638a6d3133320003330000', '5563914c30656600032e0000', '5563c0086334370003080000', '5563c87d6236630003020000', '5563ee0362366300030a0000', '5564380d6334370003210000', '55647aac6236630003110100', '554b697066323600033a0000', '556485876334370003e50000', '55647aad6236630003230100', '5564c0976334370003670200', '555c89c23765630003160000', '55650d0b3930610003010000', '5564e03d6334370003d00200', '556460036236630003150000', '5565ebeb3934330003110100', '55664f1f3930610003af0200', '5566ba986139360003200000', '5566f41b33626100030f0000', '556717246139360003460000', '556816023032660003040000', '5568c4b73465610003160200', '5568caf63465610003540200', '556683b66139360003190000', '5568f7093032660003d50100', '556916976365350003000000', '55693d976332660003130000', '556ac21d6538610003010000', '556b5c2365386100030b0000', '556ba1bf6332360003010000', '556bd1686332360003110000', '556cb82d6235330003b50100', '556cff6462353300036f0200', '556cc52862353300033a0200', '556d63376431320003010000', '556dd07e3362660003680000', '556ea0ba33626600036a0200', '556ea4d03362660003720200', '556ed4bf33626600037a0200', '55660d5939306100030d0200', '557073926136340003440000', '557058193063340003fd0100', '55710bf73261320003560000', '557111ca3261320003630000', '557058123063340003940100', '55720b1d3339340003330100', '5572dfb33938610003dd0000', '55733ae43938610003090100', '5573b6146266390003060000', '5573c94d62663900030e0000', '5574dae96130610003080000', '5575a1c46130610003820000', '5575ad376130610003ee0000', '556e29ac33626600035a0200', '55761c9d6133350003240000', '55785f5b3566320003060100', '55786b7b34373400033a0100', '55783c0535663200033a0000', '557b471534666400030f0000', '557b497b3236300003000000', '5578988935663200031b0200', '557ef99036396300031b0100', '557f0b4b30366200032e0100', '557f141b3639630003510100', '5580306c36633500034d0000', '558042fb3663350003140100', '5580502f3663350003470200', '5582345033633200030a0000', '557fc50a33363200031b0000', '558346ed37326100036e0200', '55843c4c64373200032b0100', '5580502a3663350003fe0100', '558588de62393800030b0000', '55886ff53436350003c40200', '558a21423834620003020000', '558abda06432340003a20000', '558add5f6432340003770100', '558b06d764323400034a0200', '558c2afb6532630003a30000', '558ce9a43336330003120000', '558ca1816463330003010000', '5589a50a3662310003e60000', '557f4c0b3663350003030000', '559ab3ae36333000030a0100', '558e2c313663630003160000', '559c2fba3662620003220000', '559d403b37383600039d0100', '559a83133734360003f60000', '559d4e1a3662620003040200', '55a0b5aa31613600031c0000', '55a189ae31613600032a0000', '55a1a6cd6637360003110000', '55a2b7d96637360003550000', '559c395c36626200039f0000', '55a3c8d23132340003c90000', '55a3fb3f3132340003ce0100', '55a40e856364330003100300', '55a41eaa63643300035d0300', '55a485a03236620003090000', '55a516103236620003450000', '55a576093236620003e90100', '55a6b4b76636340003ea0000', '55a7597d3266390003130000', '55a8193d3266390003a70000', '55a81eb13266390003af0000', '55a84de06239350003060000', '55a8cbb664316300030f0000', '55a5c23a66646500030c0000', '55aa8f8c6534300003140000', '55aae1b165343000033d0000', '55ab650a6534630003020000', '55abacdc6534630003220000', '55ac4e296530310003010000', '55ace32433386200030d0000', '55ad33a565303100039f0200', '55a286216637360003470000', '55ad64cd33386200037b0200', '55ae6b1e65663400037d0000', '55aee7d93630350003b00100', '55aff9646539360003430100', '55b05aa76539360003b80100', '55b0fffc35306400036b0000', '55b198b73530640003f80000', '55b28ef63365340003dd0000', '55b29ef93365340003fc0000', '55b33c4b3837610003180000', '55b67f096236380003d70100', '55b695226261620003180200', '55b7c60c6566320003a90000', '55ba7b106162350003b60000', '55bb58326234350003080000', '55b811226566320003490100', '55bbef6c6663640003590200', '55bcd2913232310003050000', '55bd69933232310003460000', '55e086ef32366300035c0000', '55e485e064346200039e0000', '55e6030c3265330003a50100', '562aa5053365370003470100', '56377b923936320003200000', '5643a35565626100038e0000', '564fb8f63836620003430100', '564fdda33836620003570100', '565f42f06533350003ab0000', '5668a4093336320003be0000', '56699b7335346300036d0000', '566a47cb3534630003f00000', '566af59f64666600031d0000', '566afb4e66616300033b0000', '566b33bf3632660003040100', '56155e4a3361650003a20200', '56155e4a3361650003a70200', '56155e4e3361650003520300', '56155e4e33616500035d0300', '56155e4e33616500036e0300', '56155e4e3361650003790300', '56155e4e33616500037f0300', '56155e4e3361650003840300', '56155e4f33616500038e0300', '56155e4f3361650003930300', '56155e4f33616500039d0300', '56155e4f3361650003a70300', '561dd01c3832620003e70000', '561fbc4d64383300031e0000', '561fbc4d6438330003260000', '561fbc4d64383300032e0000', '55bda2333232310003510000', '55be5b0464356100033a0000', '55be8e556435610003490000', '55beb02a38323000034f0000', '55bee4446435610003790000', '55bf98223461300003080100', '55bfce9b3238390003df0100', '55c0480232383900032f0200', '55cca8b164613300033b0000', '55d3f20b6437320003870100', '55d26e003037380003580300', '55d239e33037380003de0200', '55d373836437320003910000', '55d5444d3131610003740200', '55d4e96f3131610003130200', '55d5f96b3639630003610000', '55d65aa861336500035e0000', '55d67a496133650003690000', '55d6b3173639630003c50000', '55d6d1443639630003ce0000', '55d735ed37356100033d0000', '55d74e8b3261610003700000', '55d753933735610003de0000', '55d75e133735610003f60000', '55d7e69c3735610003f80100', '55d825e93261610003860100', '55d8b1483034310003010000', '55d908d93132350003290000', '55da1cb93065300003150000', '55da4a4030653000032a0000', '55db5f3c3265630003410000', '55dbdd453737620003ad0100', '55dbf2063737620003b50100', '55dc007b3737620003c10100', '55dc82963265630003e60100', '55dcbfc03839650003820000', '55dcd4453839650003d20000', '55d6240461336500032d0000', '55dd158b3034300003980000', '55ddc7f565643200032d0000', '55de41356564320003b70100', '55dc82913265630003960100', '55df19c665326500031a0000', '55df23ec6532650003280000', '55df479a6532650003600000', '55df6a9832353100036c0000', '55dc82973265630003f80100', '55df90a66532650003a00000', '55e0929032366300036e0000', '55e0b94532366300036f0100', '55e0bfb76636300003bc0000', '55e0b92f32366300031d0100', '55e296f36265330003010000', '55e372ff61653500030f0000', '55e37ca561653500031b0000', '55e3aac26265330003430000', '55e3c8556265330003570000', '55e401d33439310003010000', '5568a30e3465610003020100', '55e48a0d6434620003b80000', '55e4ba573439310003920100', '55e4ce716434620003680100', '55e4fe2f6434620003790100', '55e5049a3439310003d30100', '55e50ffd6434620003920100', '55e643293265330003f00100', '55e647a16161610003250100', '55e65ffb6161610003410100', '55e6e85c6161610003520100', '55e70e773734390003350000', '55e7120664633600030d0000', '55e653436161610003390100', '55e7626f3734390003d40100', '55e7d0b56463360003f90100', '55e7d3fd3734390003360200', '55e896d539346500033f0000', '55e8f16a3934650003660000', '55e8f7513366380003420000', '55e0b9373236630003690100', '55e9f8196461340003e90100', '55e9ea326461340003820100', '55e9ea3364613400038b0100', '55e9ea386461340003a60100', '55ed079064326200030d0000', '55ed89806264390003250000', '55ede9e96264390003330000', '55ee415835613500031a0000', '55ee4c163561350003270000', '55ef3dc76433360003030200', '55ef764965633300039c0000', '55ef90a16563330003a50000', '55efb24b3830340003010000', '55efb5ac38303400030d0000', '55e9ea3764613400039d0100', '55f01bcc3830340003360000', '55f02fa83830340003430000', '55f059da38303400031b0100', '55f073686563330003260200', '55f0933b3436330003050000', '55f0d23934363300036a0000', '55f0e42d3436330003850000', '55f186253436330003c10000', '55f1a51e61646500037c0100', '55f1b7416164650003960100', '55f1d91d3436330003f80100', '55f1fdf23739350003010000', '55f206ea6538390003010000', '55f2207265383900031a0000', '55f235973739350003180000', '55ef16e46433360003770100', '55f2eb943739350003880100', '55f362db3566300003010000', '55f39cfd36306100030d0000', '55f4799136366400030e0000', '55f577266466330003010000', '55f5ddaf6166320003060000', '55f63a9e6466330003210000', '55e636ed61616100031a0100', '55f72bfc3839630003120100', '55f731f66464360003600100', '55f753d338396300032d0100', '55f7798b6464360003830100', '55f7ab1e3065330003010000', '55f8595130663600036e0000', '55f8b2023066360003310100', '55f8b68f3065330003420100', '55f972373635320003330000', '55f972833665380003c50000', '55f984e03635320003330100', '55f972423635320003e20000', '55f9cfd03635320003ed0100', '55f9d6123663370003f30000', '55f9db723039650003c40000', '55fa43293039650003d40000', '55fb039f3338320003570000', '55fb0a573338320003730000', '55fbefde36663400033e0000', '55fc4a016463610003d20000', '55fcca3964636100030e0100', '55fcde283435610003800000', '55fd5fd234356100038b0000', '55fde6583632390003030000', '55fe1ccb3632390003190000', '55fe4d313632390003290000', '55fecf5236323900033c0000', '55fedbc33632390003430000', '55ff76bd3166300003160000', '55ff9c4531663000031c0000', '560014fe3166300003610000', '56001dc133646200037d0000', '5600633f3462620003310000', '56007d4f3566630003430000', '56007ebd35666300034b0000', '5600b2d33462620003460000', '5600b7653239300003550000', '5600f19e34626200034e0000', '56010f6c3462620003550000', '56018c1e3239300003210100', '5601b99433666500038a0000', '5601ba483366650003940000', '5601bf8a3331310003b00000', '5601cbf63331310003c70000', '5601fb173331310003d00000', '560236723366650003d90000', '56024b573366650003e30000', '5602b5f23331310003f80000', '5602b6b93366650003080100', '5602de2833666500037d0100', '5602e96c3366650003960100', '56032f2838313600037f0000', '560343c23736630003730000', '5603a5b73831360003870000', '56040b233736630003970000', '56044a5b63636400031a0100', '56044ab33736630003000100', '560452343664320003010000', '560490fe36643200031a0000', '5604a2c93664320003220000', '5604c5d43666360003310000', '5604f5653765640003650000', '5604f61b37656400036d0000', '5601ae1f3366650003490000', '5602bccc61636300037f0100', '5605919e36663600033b0100', '5606393233376200032c0000', '5606b95333376200033d0000', '56074cb93736370003010000', '56081dfa64666300032e0000', '56082ae36466630003350000', '560851a231326100030d0000', '560933b63132610003330000', '5602bccd6163630003c90100', '56005ccd3462620003270000', '5602bcd261636300033d0200', '560981676639620003920000', '560989166639620003b20000', '56099d443165630003800100', '5609d3116639620003420100', '560b64b53236650003170000', '560bc4516639650003220000', '560c25d73839310003890000', '560c48796639650003260100', '560c5f563538630003010000', '560c84d33839310003eb0000', '560d28fc6634650003120000', '560d2d9135386300032d0000', '560d3e196164390003070000', '560d3f7c61643900030e0000', '560d406f3538630003370000', '560abf7a3733630003c00100', '560d7c576634650003340000', '560d9d0666346500034f0000', '560dce6e6139360003060000', '560e09d36139360003130000', '560e225961393600031b0000', '560abf783733630003a00100', '560eefb46139360003c40000', '560f19dd3261310003000000', '5610181b61633100032c0000', '5610339832613100032a0000', '56112bf76235340003060000', '5611daf53434650003010000', '5611fadd6335650003010000', '5612a1f56335650003620000', '5612b61662386100039f0000', '560abf6f3733630003f90000', '560abf773733630003920100', '560abf793733630003a90100', '5612d73b6238610003da0000', '5612e7626335650003090100', '561326ac6562330003010000', '5613469263613300030f0000', '561351eb6238610003170100', '56135df662386100031e0100', '561362146238610003260100', '561418566562330003570000', '561482523361650003010000', '56148acc3361650003100000', '56155e363730300003750000', '56155e393730300003cc0000', '56155e3b3730300003f40000', '56155e3b3730300003110100', '56155e3e3730300003770100', '56155e463361650003540100', '56155e493361650003350200', '56155e4e3361650003740300', '56155e4f3361650003980300', '56155e4f3361650003c00300', '5615864a6134390003850000', '5615a0df3730300003900200', '5615ca8837303000039f0200', '5615e64139643400030d0000', '5615eb483964340003150000', '5615ef5c3562330003020000', '561615323964340003280000', '56155e4d3361650003070300', '5616e3c36164340003230000', '5616f5c638633500032d0000', '5617b38a6639650003010000', '5617b5223136310003010000', '56188c113665390003480000', '56191f503933660003010000', '561a71d83964650003020000', '561b093236343500030f0000', '561b3fd336343500031b0000', '561bba956263340003010000', '561bba9d6263340003050000', '561bdf133634350003510000', '561be1ac3634350003580000', '561bef993635320003010000', '561c128436353200032d0000', '561c132a3635320003350000', '561c19216263340003720000', '561d08d33832620003010000', '561d1b843832620003200000', '561d1bda3262320003190000', '561d45263436630003140000', '561d45de3832620003750000', '561d723f3832620003ba0000', '561e01163436630003500000', '561e94dc31373700034d0000', '561e976c62633000032b0000', '561e9bb83137370003560000', '561e9d8d3464330003430000', '561ed0793961390003050000', '561eeabd39613900030d0000', '561f24de3532610003010000', '561f26273532610003070000', '561f7c553039650003000000', '561fbeaf36636400034a0000', '561fbeb33663640003960000', '561fbec63663640003c60000', '561fbec73663640003d00000', '561fbedb36636400035d0100', '561fbedd3663640003780100', '561fbef03663640003fb0100', '561fbef03663640003130200', '561fbef13663640003520200', '561fbef13663640003650200', '561fbef136636400036a0200', '561fbef23663640003ae0200', '561fbef23663640003d20200', '561fbef33663640003ff0200', '561fbec93663640003fc0000', '561fce726566300003430000', '562010c46438330003c80000', '5620fd466334390003250000', '5620fd466334390003370000', '5620fd4863343900038c0000', '5620fd476334390003780000', '560abf683733630003990000', '560abf683733630003a00000', '560abf6a3733630003ca0000', '560abf6b3733630003d20000', '560abf6f3733630003ec0000', '560abf7137336300033f0100', '560abf733733630003510100', '5621202d39363400038c0000', '560ec69e6163310003b30000', '56214d793936340003e60000', '56214e183936340003f00000', '56215c0d6266640003050100', '5621b35d3936340003430100', '56224fb83630610003010000', '5622b98b3630610003210000', '561fbecc3663640003200100', '5623ac293063610003020000', '5623f42c3730300003030000', '562427a73730300003100000', '5624488337303000031f0000', '5624707930636100032d0000', '5624f84837633800034b0000', '562505a464633100033f0000', '5625085464633100034c0000', '56255a2f6464390003ce0000', '56255c243666630003630000', '5625966a36666300037f0000', '56264e9137633100030c0000', '5626625d6561620003370000', '562662e83131650003310000', '562667563131650003400000', '562667573131650003490000', '5626675831316500035a0000', '562667593131650003620000', '562667593131650003690000', '5626675a3131650003720000', '5626675b31316500037b0000', '5626675c3131650003940000', '56267f116561620003680000', '5626916265616200036f0000', '5626a57c3763310003770000', '5626bd716561620003810000', '5626d73c6561620003950000', '56277da76137390003010000', '56278b5a3264640003060000', '5627957a3266320003090000', '5624f84a3763380003650000', '562669b63763310003380000', '56155e393730300003bb0000', '56155e383730300003ab0000', '56155e393730300003c40000', '56155e383730300003a30000', '56155e3a3730300003de0000', '5627d5a76137390003780000', '5627dc5a32663200036f0000', '56155e383730300003b30000', '56155e3737303000037f0000', '5627e7516137390003c80000', '56155e3c3730300003330100', '56155e3b3730300003fb0000', '56155e3b37303000031a0100', '5624f84537633800030a0000', '562838fb3266320003e50000', '56284af33264640003240100', '5628657461373900032b0100', '5628acb26137390003330100', '56155e3e3730300003660100', '56290a046537350003110000', '56155e3d37303000035e0100', '56155e3b3730300003220100', '562902946366370003210000', '56293f186537350003470000', '56296cd13061630003590000', '56299c8b6366370003820000', '56155e403730300003910100', '562a5aa561303400036d0000', '56155e433361650003aa0000', '56155e4333616500039e0000', '56155e443361650003c10000', '56155e453361650003cc0000', '562a6ec33139610003be0000', '562a80e63139610003cf0000', '562a82a93139610003d90000', '56155e453361650003150100', '56155e463361650003350100', '56155e463361650003370100', '56155e4633616500033f0100', '56155e463361650003490100', '56155e463730300003f90100', '56155e4633616500032b0100', '56155e463361650003460100', '56155e4533616500031e0100', '56155e4633616500036c0100', '562a95836130340003e50000', '562a964d31396100030d0100', '562aba8e6130340003260100', '562b0f323962350003030000', '562b9be66536660003030000', '562bcf983133320003190000', '562c01b86536660003230000', '562c70ca39313800030c0000', '562d7b9c6630330003110000', '562d8f463639650003020000', '562db19937316500030d0000', '562dd70a36396500030a0000', '562e21503639650003130000', '562e22f16137620003090000', '56155e4633616500035d0100', '56155e463361650003730100', '56155e4633616500035f0100', '56155e463361650003520100', '562e34453639650003600000', '562e344636396500038f0000', '562e344636396500039f0000', '562e34473639650003b00000', '562e34483639650003b90000', '562e34493639650003cb0000', '562e344a3639650003e40000', '562e368c3639650003aa0100', '56155e473730300003140200', '562e3e633639650003c70100', '562e49ec61376200037f0000', '562e344c3639650003260100', '562e75a36137620003bb0000', '562ea7e23639650003380200', '562edcb16137620003080100', '562f1b836137620003100100', '562f79cd31666100030b0000', '562f8ba16563380003030000', '56155e483361650003ed0100', '562fac7165633800039f0000', '562fd3213764630003830000', '5630622b6563380003200100', '5630d6883133660003070000', '5630d6a46563380003340100', '562e345136396500036a0100', '562e34513639650003640100', '563133d13137640003940000', '5631398f3133660003ad0000', '5631788f3133660003ba0000', '563193cc3133660003c70000', '5631967d3037320003280000', '56324d2f3835330003580000', '563283753636340003450000', '563380a03239610003010000', '563384c33239610003090000', '56324d3238353300039c0000', '5633c40f64653800033f0000', '563435243863340003010000', '56345b6332396100036a0000', '563469b03239610003720000', '5634b7f838633400030a0000', '563586d33636380003010000', '563633c36233640003010000', '563742f63635620003010000', '54e247c06163360003500300', '56377e603761610003220000', '5637a21430366200033f0000', '5637a2143036620003450000', '5637a2163036620003570000', '5637a2163036620003700000', '5637a2163036620003770000', '5637a2173036620003860000', '5637a2193036620003c60000', '5637a21a3036620003ec0000', '5637a21a3036620003d70000', '5637a2173036620003af0000', '5637a2173036620003a60000', '5637b84739363200038e0000', '5637c0a83635620003d30000', '5637cb1c3635620003e60000', '5637d72536356200030b0100', '563816443936320003d00000', '56382c0630366200038d0100', '563840f43936320003ee0000', '56384a833036620003a10100', '5638ca296139320003160000', '5638dd073036620003d30100', '56324d2e3835330003470000', '5637a2193036620003cf0000', '5637a21730366200038e0000', '5639071c6533320003460000', '56390c116139320003480000', '56391d9032303600037e0000', '56391f4d6139320003670000', '563929113230360003930000', '56392a3b65333200038e0000', '56392ab96533320003ed0000', '5639976f3230360003ba0000', '56399f6b65333200032f0100', '563a0ce76533320003350100', '563a2b4f3863390003520000', '563a40853766360003140000', '5634befe3331330003000000', '563a6d7e6438610003010000', '563a8db33766360003560000', '563aa58335383600035d0000', '563ab20464386100031a0000', '563abf336265610003020000', '563b6d9462656100031d0000', '563234143366650003030000', '56324d2e38353300031f0000', '563bc59362656100036c0000', '563bf8046666610003180000', '563bf9a766666100031f0000', '563c5d566338630003000000', '563c06cc6666610003290000', '562e344b36396500030d0100', '562e34453639650003590000', '563cdd193339300003170000', '563cc9cf36383100030c0000', '563ce21f33393000031f0000', '563b9c2a6438610003820000', '563b97d464386100037a0000', '563b59026265610003150000', '563cf5a933393000034f0000', '563cf5a93339300003570000', '563cf5ab33393000037a0000', '563cf5ab33393000038a0000', '563cf5ab3339300003930000', '563cf5ac33393000039c0000', '563cf5ac3339300003ad0000', '563cf5ad3339300003be0000', '563d07e23339300003ec0000', '563d187336383100036a0000', '563d21913663380003550000', '563d24e636633800035d0000', '563d26063638310003800000', '563e6afd3434610003070000', '563e812f61636600030e0000', '563fb6203534660003130000', '563fc9763534660003220000', '564068896661640003100000', '5640b3eb61663300030c0000', '5640b5dc66616400032d0000', '5640b5886661640003270000', '563cf5ab3339300003820000', '563f10083534660003010000', '564105e96661640003ba0000', '563cf5ad3339300003d60000', '56410d966166330003b80000', '56410f4d6166330003c40000', '564155396661640003260100', '564155ab66616400032d0100', '5641e80e32346300031e0000', '5641fa656463310003030000', '564214593234630003440000', '56421f043833300003270000', '5642403c64633100034a0000', '564253823234630003970000', '564255f932346300039f0000', '564288ca3234630003ab0000', '5642a2a63131340003010000', '5642aed464633100037e0000', '5642bb7f6463310003830000', '56433b3f3734320003000000', '56155e4a33616500037f0200', '56438b5837343200035b0000', '5643971563306200036f0000', '5643994e3734320003760000', '56439e9037343200037f0000', '56439eaa37343200038e0000', '5643a5833734320003a50000', '5643a5843734320003b60000', '5643a5843734320003bf0000', '5643a5853734320003d00000', '5643a5853734320003d80000', '5643a5853734320003e10000', '5643a58737343200033a0100', '5643ad2c6562610003980000', '5643ff283237360003010000', '564428983237360003190000', '56449b073237360003320000', '5643a58837343200035c0100', '56450b693266310003a90000', '56450b693266310003b00000', '56450b693266310003c30000', '56450b6a3266310003d40000', '56450b6b3266310003ed0000', '56450b6c3266310003060100', '5645a2b83239380003010000', '5645f3ec3634320003060000', '56456c2c62666200030e0000', '56450b6c3266310003fe0000', '564617f83764650003630000', '5643a5863734320003120100', '56462c913764650003900000', '56463f6e3764650003d70000', '56465b0c3634320003a00000', '5646d4b43566640003070000', '564758fc6565340003010000', '5647894d3836370003020000', '5647d52538363700030a0000', '5647e7753836370003100000', '56489c023836370003300000', '564907e766363200031f0000', '564960423565360003010000', '564a316f3133620003370000', '564a470336323200035a0000', '564a85863632320003670000', '564ab17f3262660003750000', '564b3de16235650003010000', '564b56213864610003370000', '564b58d438646100033e0000', '564b58d73864610003690000', '564b58d93864610003840000', '564b58da38646100038d0000', '564b58db3864610003960000', '564b58dc38646100039e0000', '564b58de3864610003b70000', '564b7be338646100030e0100', '564b58e13864610003d10000', '564b876e38646100031a0100', '564bb9883963390003ab0000', '564bcbc86235650003a70000', '564bea7038646100034e0100', '564bec453963390003ce0000', '564c48283963390003d90000', '564c81e53737610003000000', '564c9b3e3564300003050000', '564ca6993835640003220000', '564c7aff6565370003020000', '56155e4a3361650003ac0200', '564cb2f13737610003510000', '564c03f33864610003560100', '564b7c926235650003700000', '564d52c73737610003d10000', '564d654d3564300003b80000', '564de66f6261350003070000', '564e402735376600030d0000', '564e87713138660003250000', '564f277e3537660003480000', '560abf703733630003270100', '564f6e173836620003b20000', '564f748f3836620003c50000', '564f81333436360003810000', '564f813434363600038a0000', '564f81343436360003920000', '564f81353436360003b00000', '564f81353436360003b60000', '564f81353436360003be0000', '564f81363436360003d70000', '564f813e3436360003ed0000', '564f813e3436360003f20000', '564f813e3436360003f80000', '564f813e3436360003fd0000', '564f813f3436360003120100', '564f813f3436360003290100', '564fe96738366200035d0100', '5650d84a3431640003070000', '565170563431640003300000', '56519f593431640003380000', '5651f1e83136650003010000', '56528c6a3831620003080000', '565300e93831620003290000', '565272363136650003090000', '5653757839373500035e0000', '5653a5a43439650003ae0000', '56543d266366380003010000', '564b58d63864610003470000', '5653d18b3830620003820000', '56551a426366380003aa0000', '565532fe6366380003bf0000', '5655342835366300037b0000', '5655a8fe3761310003a20000', '5655d85730373700031a0000', '5655d91f3761310003ce0000', '56547b4c63663800030b0000', '5655fafe66633400033d0000', '5655faff6663340003460000', '5655fb0066633400034f0000', '5655fb086663340003a80000', '5655fb096663340003b10000', '5655fb0d6663340003e80000', '5655fb0f6663340003fa0000', '5655fb046663340003840000', '5655fb0d6663340003e20000', '565673893630390003030000', '565690413630390003170000', '5656ffae34356500030a0000', '5657092e3435650003110000', '56572e186261660003020000', '56579a263839340003190000', '5658ace034353300030a0000', '5658e92c3937370003010000', '565936ca3233610003010000', '5659488132663000032f0000', '5659ea8d39373700032f0000', '565a25c23234360003120000', '565a79083232640003110000', '565b32916636350003060000', '565b3f146636350003120000', '565b50af37626500030e0000', '565b9f4f3762650003220000', '565bd5ba6636350003380000', '565bfbf53530340003010000', '565c459b3530340003080000', '565c5e006537310003020000', '565c783835303400034b0000', '565b26e863303600030c0000', '565cab126333380003930000', '5643a5833734320003ae0000', '565cc5726466650003c40000', '565cc5736466650003ec0000', '565cc5736466650003040100', '565cc57464666500032d0100', '565cc5796466650003810100', '565d1e293432640003070000', '565dbd5837653700031f0000', '565ceb656466650003a90100', '565cc7536466650003920100', '565cc5796466650003780100', '565cc5786466650003690100', '565de4e63765370003a60000', '565cc57864666500036f0100', '565e21763432640003ea0000', '565e46dd3064610003300000', '565e48ba34326400030b0100', '565e4ddb3432640003120100', '565e952e6531300003bd0000', '565e9e833661300003020000', '565ed91a3636350003010000', '565edad26636330003010000', '565e1adb3432640003d60000', '565f0e8965333500031d0000', '565e01bd3432640003ba0000', '565cc5746466650003250100', '565cc5736466650003fc0000', '565cc57564666500033f0100', '565e521f34326400031a0100', '565cc57464666500030d0100', '565cc5736466650003f40000', '565f1f793639390003920000', '560e445a6164390003560000', '562a9b4d33653700031f0100', '5655fb0a6663340003ba0000', '565f660d3937370003df0000', '565fa9d76533350003f70000', '565faa2e3937370003f00000', '565fb38b6533350003030100', '565fbc206533350003100100', '565fc57f3937370003060100', '566038123639390003450100', '56155e493361650003520200', '56155e493361650003540200', '56155e4933616500035c0200', '56155e493361650003660200', '56155e4a3361650003890200', '56606d183233360003320000', '56606ef732643100033f0000', '566077e032643100035a0000', '56155e4a3361650003b10200', '56155e4a33616500039d0200', '56155e4a3361650003b60200', '56155e4d3361650003cd0200', '56155e4d3361650003d30200', '5660a3f73264310003a30000', '56155e4d3361650003de0200', '56155e4d3361650003ea0200', '56155e4d3361650003e40200', '56155e4d3361650003010300', '56155e4d33616500030c0300', '56155e4d3361650003120300', '56155e4d3361650003250300', '5660a9816161320003c30000', '56155e4e33616500034c0300', '56619ee23333330003120000', '566125af3264310003f10000', '5660775c3264310003530000', '56610d673333330003010000', '5661f13535343200037c0000', '565520e937613100038d0000', '55f2e33237393500035f0000', '55da4b863065300003330000', '5663a8e739346200030b0000', '5663e5cf3062360003010000', '566494996164310003010000', '5665a39f6364300003290000', '5665b62632613700031e0000', '5665c0483261370003260000', '5665e55a3261370003480000', '5665ffaa38633800030d0000', '5666bd2b3465610003250000', '5666f19b62633800031f0000', '55e5c0646161610003180000', '5666efd838633800034d0000', '566622ba6363350003190000', '5665e53861643100036b0000', '5664c48c6561660003030000', '5663b73d3934620003120000', '5660c04d3233360003a70000', '5602c09333666500032b0100', '565bdc863334370003190000', '566233d03366370003a90000', '566669b838633800033f0000', '5666347438633800032d0000', '565f5ee73639390003e60000', '5664f24065616600030c0000', '56635a383934620003010000', '55cea5f636663600036d0000', '56672c9d62633800037f0100', '56608dd36161320003580000', '565f4acf3937370003bd0000', '55afae736539360003710000', '55b6f1f362616200035a0200', '566787ad6263380003840200', '5667c27f6266640003020000', '56684d0c3032310003b50100', '5667621a6263390003640000', '5660842c3264310003620000', '5667781562633800037d0200', '5667ae3e3230300003010000', '566798273538370003010000', '56683e953032310003a40100', '55a3c8ec3132340003d00000', '55d8838032616100038e0100', '55d96b1230343100032f0000', '55d1ed0033303200034d0000', '56696d3a3336320003000100', '5668e1693336320003e80000', '5668c95c3336320003e20000', '5669bc933134350003880000', '5668d65835383700031f0100', '566894a63538370003fe0000', '56693ad63336320003ef0000', '5637cf4e3635620003f40000', '566a340f31343500030d0100', '5669da7c3134350003bd0000', '5542a2be32376500030e0000', '554e95dc3631630003090000', '551e33e16534380003110000', '566b061e6466660003430000', '566b135e6661630003810000', '566b15ff6466660003780000', '566b17d464666600037e0000', '56439e903734320003830000', '563d7aff3638310003910000', '566a47343534630003e90000', '565c757435303400033d0000', '566b2f2c3632660003e30000', '5668a4b362666400030b0100', '566b46ef6661630003720100', '566b9aaa6661630003af0100', '566ba0ab6661630003b70100', '566ba55d64666600033d0100', '566bce2b6661630003cb0100', '566c177e3632660003930100', '566c75c23932360003090000', '566c988f3932360003180000', '566da38f3837640003010000', '566dabbc3838350003020000', '566dffae3837640003220000', '566e302f3838350003130000', '566b5f4a6661630003a40100', '566c081f6466660003600100', '566ee9293066660003540000', '566cc6313266650003080000', '566b5c5a3632660003720100', '566b14b33632660003720000', '566f1e013836640003d40000', '567035fc3365620003350000', '561d95503832620003d20000', '5627a9e66137390003460000', '553ba0846631610003090000', '558050273663350003870100', '566af6c36661630003280000', '56155e4c3361650003c10200', '56155e4d3361650003d90200', '56155e4d3361650003fb0200', '56155e4d3361650003180300', '56155e4d33616500032b0300', '56155e4d3361650003300300', '56155e4c3361650003bb0200', '56155e4d3361650003c70200', '56155e4d3361650003f00200', '56155e4d3361650003f50200', '56155e4d33616500031e0300', '56155e4d3361650003350300', '56155e4e3361650003400300', '56155e4e3361650003460300', '56155e4e3361650003580300', '555943fc65396400030b0000', '55675d2d6139360003f20000', '5568a30f3465610003270100', '558c091b6532630003270000', '55a253e438323000030f0000', '55a3bee16364330003630000', '55a3c3b06364330003150100', '55a6662c66646500032e0000', '55a944f76239350003e00000', '55afd8d830386300030f0100', '55b276fa3365340003840000', '55b789526362610003290000', '55ca6adb6135620003b50000', '55ccb3b86461330003cc0100', '55d1f3b33037380003550000', '55db5dc33737620003d70000', '55dc82953265630003dd0100', '55dcc33f30343000034e0000', '55e0b92e3236630003db0000', '55e60ac561616100030b0100', '55e75a5e64633600036d0100', '55e9ea306461340003510100', '55ed686064326200031d0000', '55f0704965633300030b0200', '55f0919461343200033d0000', '55f0e50334363300038c0000', '55f709cc3839630003a20000', '55f87ee93065330003fe0000', '5602b3f63331310003eb0000', '5602c8af33313100032d0100', '5605af133636350003550000', '5605ea263337620003200000', '560e9c8c6163310003450000', '561437376562330003910000', '56155e3a3730300003e60000', '56155e3f3730300003880100', '56155e423730300003ac0100', '56155e423730300003b50100', '56155e423730300003be0100', '56155e443361650003c60000', '56155e443730300003d90100', '56155e453730300003e70100', '56155e453730300003f00100', '56155e463361650003760100', '56155e483361650003d60100', '56155e483361650003e20100', '56155e493361650003190200', '56155e493361650003250200', '56155e4933616500033d0200', '56155e493361650003490200', '56155e493361650003670200', '56155e4a3361650003700200', '56155e4a3361650003750200', '56155e4a33616500037a0200', '56155e4a3361650003840200', '56155e4a3361650003980200', '56155e4f3361650003ac0300', '56155e4f3361650003b60300', '56155e4f3361650003bb0300', '56155e4f3361650003ca0300', '56155e4f3361650003d40300', '56155e4f3361650003d90300', '5615c7363730300003970200', '561672433132320003060000', '561672473965650003020000', '5616953a6338310003010000', '5616ac783863350003050000', '5616ed423863350003250000', '5617ee123665390003130000', '56184a3a36653900033b0000', '56189eed6639650003570000', '5618a21831363100034c0000', '5618f8993136310003530000', '5618f9ac3665390003560000', '56192abc3462320003010000', '5619b41939633700030b0000', '561be6ef6263340003400000', '561cc70d36353200035c0000', '561d40993436630003040000', '561d55ba34366300031f0000', '561d599f3262320003530000', '561d6ad03832620003af0000', '561d793b3832620003c50000', '561d7f0a3832620003cb0000', '561e0d5e3262320003710000', '561e92e23464330003290000', '561efad33464330003660000', '561fbc4c6438330003050000', '561fbc4c64383300030d0000', '561fbc4d6438330003160000', '561fbc4e6438330003370000', '561fbc4e64383300033f0000', '561fbc4f6438330003470000', '561fbeaa3663640003150000', '561fbeab36636400031f0000', '561fbeac3663640003280000', '561fbeac3663640003300000', '561fbead3663640003390000', '561fbeae3663640003420000', '561fbeb03663640003530000', '561fbeb036636400035b0000', '561fbeb13663640003630000', '561fbeb136636400036b0000', '561fbeb13663640003720000', '561fbeb13663640003780000', '561fbeb236636400037f0000', '561fbeb23663640003880000', '561fbeb33663640003900000', '561fbeb436636400039f0000', '561fbec53663640003a80000', '561fbec53663640003b00000', '561fbec63663640003b90000', '561fbec63663640003c00000', '561fbec73663640003da0000', '561fbec83663640003e30000', '561fbec83663640003eb0000', '561fbec83663640003f30000', '561fbeca3663640003050100', '561fbecb36636400030e0100', '561fbecd3663640003290100', '561fbece3663640003310100', '561fbeda3663640003370100', '561fbeda3663640003450100', '561fbedb3663640003540100', '561fbedc3663640003660100', '561fbedd36636400037f0100', '561fbede3663640003870100', '561fbede36636400038e0100', '561fbedf3663640003980100', '561fbedf3663640003a00100', '561fbedf3663640003a80100', '561fbee03663640003b00100', '561fbee03663640003b80100', '561fbee03663640003bf0100', '561fbee03663640003c50100', '561fbee03663640003cd0100', '561fbee13663640003d50100', '561fbee13663640003db0100', '561fbee23663640003e40100', '561fbef03663640003010200', '561fbef03663640003070200', '561fbef036636400030d0200', '561fbef03663640003180200', '561fbef036636400031e0200', '561fbef03663640003240200', '561fbef036636400032a0200', '561fbef036636400032f0200', '561fbef036636400033b0200', '561fbef03663640003f50100', '561fbef13663640003410200', '561fbef13663640003460200', '561fbef136636400034c0200', '561fbef13663640003580200', '561fbef136636400035f0200', '561fbef136636400036f0200', '561fbef13663640003750200', '561fbef136636400037a0200', '561fbef13663640003800200', '561fbef13663640003860200', '561fbef136636400038c0200', '561fbef13663640003920200', '561fbef13663640003970200', '561fbef236636400039d0200', '561fbef23663640003a30200', '561fbef23663640003a80200', '561fbef23663640003b30200', '561fbef23663640003b90200', '561fbef23663640003c30200', '561fbef23663640003c80200', '561fbef23663640003cd0200', '561fbef23663640003d70200', '561fbef23663640003dc0200', '561fbef23663640003e10200', '561fbef23663640003e60200', '561fbef33663640003040300', '561fbef33663640003090300', '561fbef336636400030e0300', '561fbef33663640003130300', '561fbef33663640003f00200', '561fbef33663640003f50200', '561fbef33663640003fa0200', '5620fd456334390003080000', '5620fd456334390003140000', '5620fd4563343900031f0000', '5620fd4663343900032b0000', '5620fd4663343900033d0000', '5620fd466334390003420000', '5620fd466334390003480000', '5620fd4663343900034e0000', '5620fd466334390003540000', '5620fd4663343900035a0000', '5620fd466334390003600000', '5620fd476334390003660000', '5620fd4763343900036c0000', '5620fd476334390003720000', '5620fd4763343900037d0000', '5620fd476334390003820000', '5620fd486334390003870000', '5621080f6334390003c30000', '56213ef26334390003590100', '562246c96664390003010000', '562452553063610003110000', '5624f8463763380003130000', '5624f84637633800031b0000', '5624f8463763380003220000', '5624f8463763380003280000', '5624f8463763380003300000', '5624f8473763380003390000', '5624f8483763380003420000', '5624f8493763380003540000', '5624f84937633800035c0000', '5624f84a37633800036e0000', '5624f84c3763380003770000', '5624f84e3763380003800000', '5624f84f3763380003910000', '5624f84f3763380003960000', '562544e66464390003ae0000', '562667583131650003520000', '5626675b3131650003840000', '5626675b31316500038c0000', '5626675d31316500039d0000', '5627a17732663200031e0000', '5627f74e3266320003c60000', '5629a7a76537350003770000', '562a26e16130340003060000', '562af4823365370003520100', '562b7acd6330350003010000', '562bcb7f6536660003130000', '562c99533931380003140000', '562d1cd43731650003010000', '562e34453639650003510000', '562e34453639650003660000', '562e344536396500036e0000', '562e34453639650003760000', '562e344636396500037e0000', '562e34463639650003970000', '562e34473639650003a80000', '562e344a3639650003d40000', '562e344a3639650003dc0000', '562e344b3639650003050100', '562e344b3639650003150100', '562e344b36396500031d0100', '562e344b3639650003f50000', '562e344d36396500032f0100', '562e344e3639650003410100', '562e344f36396500034a0100', '562e34503639650003530100', '562e34523639650003730100', '562e51aa61376200039f0000', '562ecd4a6137620003020100', '563083ec6563380003280100', '5630f6df31336600036f0000', '563111af3037320003070000', '56324d2d3835330003170000', '56324d2e3835330003270000', '56324d2e3835330003390000', '56324d333835330003a40000', '5633a6583038320003290000', '563534b63863340003180000', '5635cbff36363800030d0000', '5636cf7062306200031a0000', '5637a21430366200032d0000', '5637a2143036620003330000', '5637a2143036620003390000', '5637a2163036620003680000', '5637a21630366200037e0000', '5637a2173036620003960000', '5637a21730366200039e0000', '5637a2183036620003b80000', '5637a2193036620003c00000', '5637a21a3036620003dc0000', '5637a21a3036620003e10000', '5638eefa3230360003410000', '56392a3a6533320003870000', '56392a3b6533320003940000', '56392a3b65333200039c0000', '56392a3b6533320003a40000', '56392a3b6533320003b20000', '56392a3b6533320003ba0000', '56392a3c6533320003c20000', '56392a3c6533320003d30000', '56392a3d6533320003db0000', '563a21ac38633900030a0000', '563a21ac3863390003120000', '563a21ad38633900031b0000', '563a5cff3766360003350000', '563a6f493766360003480000', '563a75713538360003490000', '563be4ce6666610003110000', '563cf5aa3339300003690000', '563cf5ad3339300003b60000', '563cf5ad3339300003c60000', '563cf5ad3339300003ce0000', '563cf5ad3339300003e30000', '563e727136316500030a0000', '5640e7506630640003490000', '56411f0a6661640003160100', '564121766166330003ed0000', '5641e7cf32346300031b0000', '5642275464633100032b0000', '5642462f3234630003890000', '56428c9c3234630003b20000', '564395756562610003710000', '5643a5853734320003c80000', '5643a5863734320003020100', '5643a58637343200030a0100', '5643a5863734320003ea0000', '5643a5863734320003f20000', '5643a5863734320003fa0000', '5643a58737343200031a0100', '5643a5873734320003430100', '5643a58737343200034b0100', '5643a5883734320003530100', '5643a58937343200036a0100', '5643a5893734320003730100', '5643a58a37343200037c0100', '5643a58b3734320003850100', '5643a58b37343200038e0100', '5643a58e3734320003970100', '5643a58f3734320003a00100', '56450b683266310003910000', '56450b693266310003990000', '56450b693266310003a10000', '56450b6b3266310003dd0000', '56450b6b3266310003e50000', '56450b6b3266310003f60000', '564604383634320003280000', '56462c913764650003890000', '56462c913764650003970000', '56462c923764650003a00000', '56462c923764650003a80000', '56462c933764650003b90000', '56462c943764650003c20000', '56462c943764650003cb0000', '56466ca23332320003a60000', '564792f86565340003150000', '5648fb1966363200030f0000', '5649d3b33832330003100000', '564b58d73864610003610000', '564b58de3864610003a70000', '564b58de3864610003af0000', '564b58df3864610003c00000', '564b6ac539633900034d0000', '564e7c076261350003290000', '564f6fa13836620003b80000', '564f81333436360003790000', '564f81353436360003a40000', '564f81363436360003cf0000', '564f81363436360003e00000', '564f813e3436360003020100', '564f813e3436360003e70000', '564f92633836620003120100', '5651157338633500030a0000', '5653683f38306200033e0000', '56552f663536630003720000', '565577e16366380003c70000', '5655fafd6663340003150000', '5655fafe66633400031d0000', '5655fafe6663340003250000', '5655fafe66633400032d0000', '5655fafe6663340003350000', '5655fb016663340003580000', '5655fb016663340003600000', '5655fb026663340003690000', '5655fb026663340003720000', '5655fb0366633400037b0000', '5655fb0566633400038d0000', '5655fb066663340003960000', '5655fb0b6663340003c30000', '5655fb0c6663340003cc0000', '5655fb0c6663340003d50000', '5655fb0d6663340003dd0000', '5655fb0e6663340003f10000', '56560cf53037370003650000', '5657985662616600030f0000', '565871876261300003010000', '565968ef3234360003010000', '565c8cb96333380003600000', '565c9e7063333800036e0000', '565cc5726466650003cc0000', '565cc5726466650003d40000', '565cc5736466650003dc0000', '565cc5736466650003e40000', '565cc5746466650003150100', '565cc57464666500031d0100', '565cc5746466650003360100', '565cc5756466650003480100', '565cc5766466650003510100', '565cc5766466650003590100', '565cc5776466650003610100', '565cc57b64666500038a0100', '565f65193639390003040100', '565fce3339373700030c0100', '5660523061613200030d0000', '56605e6d3264310003070000', '56608ffa6161320003610000', '566235cf3534320003b50000', '56639d2b6166370003020000', '56649a896164310003080000', '5664badb6364300003010000', '5666005263633500030c0000', '56662a1e63633500031f0000', '566643c13863380003350000', '5666589c6263380003090000', '566700b86263380003910000', '56686a1c3538370003760000', '566884ee6266640003af0000', '566966653134350003020000', '566af38d6466660003180000', '566b080066616300034a0000', '566b12c93632660003640000', '566b37436466660003e80000', '56155e473361650003a30100', '56562b7466633400032c0100', '56155e3b3730300003040100', '561aca0b3863370003070000', '56718a9e39343400032d0000', '561734ec3863350003360000', '5670e4433365620003a20100', '563cf5ac3339300003a40000', '5602bcc66163630003f10000', '566be1416466660003520100', '566cdfab3135380003110000']
    leads = Business::Lead.where(:_id => {"$in" => lead_ids}).all
    # leads.map{|ld| ld.tasks.where(:stage=>'inquiry',:created_at.gte=>Time.now - 2.hour,:created_at.lte=>Time.now).all.map{|task|  task.update_attributes(:stage=>"deleted")};ld.update_attributes(:stage=>'cold');puts ld.id.to_s;} 
    leads.map{|ld| ld.tasks.where(:stage=>"deleted",:created_at.gte=>Time.now - 3.hour,:created_at.lte=>Time.now).all.map{|task|  task.delete};puts ld.id.to_s;} 
    
  end
  desc "update cold leads to qualified for december_after_overdue"
  task :update_cold_leads_to_qualified_after_overdue => :environment do
    
    leads = Business::Lead.where(:stage=>'cold',:created_at.gte=>Date.new(2015,12,1)).all
    puts "list of lead ids which are moved from cold to qualified december 2015"
    leads.map{|ld| p ld.id}
    #leads.map{|ld| p ld.id; p "list of existing tasks of this lead"; p ld.tasks.map{|task| p task.id;p task.stage;}}
    leads.map{|ld|  ld.update_attributes(:stage=>'inquiry');}
    #Business::Lead.task_create_new(ld,ld.contact);


  end
end